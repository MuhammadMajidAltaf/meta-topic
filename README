BSP for Topic development boards, like the Miami and its Florida carrier
boards.

This is an overlay intended for OpenEmbedded and/or Yocto.

--- OpenEmbedded ---

Here's a quick script for OE:

mkdir my-zynq
cd my-zynq
git clone git://git.openembedded.org/openembedded-core oe-core
git clone git://github.com/openembedded/meta-oe.git meta-oe
git clone git://git.openembedded.org/bitbake bitbake
git clone http://github.com/topic-embedded-products/meta-topic.git meta-topic

meta-topic/scripts/init-oe.sh

cd build

# Edit local.conf to match your setup. In particular, check the paths to
# the Xilinx tools.
vi conf/local.conf

# The default machine is "topic-miami-florida-med-7015", change it in the
# "profile" script or just export the MACHINE environment before building.

# Then build your first image and relax a bit:
. ./profile
nice bitbake my-image

Note that "my-image" was designed to be used with DISTRO=tiny. It
expects to run with busybox-mdev instead of udev.

For the Miami boards, there is a miami-vice-image that can be run on the
miami board using only the "Miami Vice" debugging add-on. This image can
be loaded into RAM using JTAG and run from there, see README-JTAGBOOT
for more information on how to do that.


--- Yocto ---

For Yocto, clone this repository to a local directory, and add it to the
conf/bblayers.conf file. Change your MACHINE to "topic-miami-7015" or
"topic-miami-7030", and bitbake core-image-minimal. See also the Yocto
Quick start for more information:
http://www.yoctoproject.org/docs/1.6.1/yocto-project-qs/yocto-project-qs.html

A few recipes still require the "gitpkgv" class from meta-openembedded.
Include it by cloning git://github.com/openembedded/meta-oe.git and add
the path to its "meta-oe" subdirectory to the conf/bblayers.conf list.
Getting rid of this meta-oe dependency is still on my TODO list.


--- BOOT ---

The simplest way to boot the resulting image is to place it on an SD
card. The scripts/partition-sd-card.sh script formats an SD card so it
can be used directly. This needs to be done only once for a card.
The install-to-sd scripts copy the required files to the card. You'll
have to run these scripts as root, as they require low-level access to
the SD card.

To boot a Miami-Florida board, insert the SD card into the slot, set the
jumpers on the miami to boot from SD (01010110) and switch on the power
supply.


--- Additional information ---

In order to properly use the zynq for anything useful, you will need to
build a bitstream image using the Xilinx tools. README-LOGIC contains
some tips on that (mainly for myself because I keep forgetting these
tricks).

This started as a fork of Ballister's OE environment for Zynq boards.

This repository also contains support for Dyplo, see
http://www.topicembeddedproducts.com/products/dyplo/

In future, this OpenEmbedded overlay is to be split up into several
components, as to separate the board support package for Topic Miami
boards, the Dyplo framework and the tiny distro.


--- Contact ---

For questions or comments, contact Topic Embedded Products via the website:
http://www.topicembeddedproducts.com/
